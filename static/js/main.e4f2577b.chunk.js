(this.webpackJsonpblankificator=this.webpackJsonpblankificator||[]).push([[0],{18:function(t,e,a){},19:function(t,e,a){},21:function(t,e,a){},22:function(t,e,a){"use strict";a.r(e);var i=a(0),s=a(1),r=a.n(s),n=a(11),o=a.n(n),c=(a(18),a(19),a(2)),l=a(3),p=a(7),u=a(5),h=a(4),d=a(6),m=function(t){Object(u.a)(a,t);var e=Object(h.a)(a);function a(){var t;Object(c.a)(this,a);for(var i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return(t=e.call.apply(e,[this].concat(s))).state={selected:!1,value:"Test"},t}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.props.nullable&&this.setState({value:""})}},{key:"corrected",value:function(t){return this.props.available||this.state.selected?"calc("+t+"mm - 1px)":t+"mm"}},{key:"gen_style",value:function(){return{textAlign:"left",width:this.props.width+"mm",height:this.props.height+"mm",left:this.corrected(this.props.x),top:this.corrected(this.props.y),alignItems:"true"===this.props.centered?"center":"left"}}},{key:"toggle",value:function(){this.props.available&&this.setState({selected:!this.state.selected})}},{key:"render",value:function(){var t=this;return Object(i.jsx)("div",{className:"item"+(this.state.selected?" item-selected":"")+(this.props.available?" item-available":""),style:this.gen_style(),onClick:function(){return t.toggle()},children:Object(i.jsx)("span",{children:this.props.data?this.props.data:this.state.value})})}}]),a}(r.a.Component);m.defaultProps={data_id:"",x:0,y:0,width:0,height:0,available:!0,nullable:!1};var v=function(t){Object(u.a)(a,t);var e=Object(h.a)(a);function a(){var t;Object(c.a)(this,a);for(var i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return(t=e.call.apply(e,[this].concat(s))).state={selected:!1},t}return Object(l.a)(a,[{key:"corrected",value:function(t){return this.props.available||this.state.selected?"calc("+t+"mm - 1px)":t+"mm"}},{key:"gen_style",value:function(){return{width:this.props.width+"mm",height:this.props.height+"mm",left:this.corrected(this.props.x),top:this.corrected(this.props.y),fontSize:this.props.fontSize?"."+this.props.fontSize.replace(".","")+"in":"inherit"}}},{key:"toggle",value:function(){this.props.available&&this.setState({selected:!this.state.selected})}},{key:"render",value:function(){var t=this;return console.log("upper ? "+this.props.upperCase),console.log(this.props.itemProps),Object(i.jsx)("div",{className:"group-item"+(this.state.selected?" item-selected":"")+(this.props.available?" item-available":""),style:this.gen_style(),onClick:function(){return t.toggle()},children:this.props.itemProps.map((function(e){return Object(s.createElement)(m,Object(d.a)(Object(d.a)({},e),{},{data:"true"===t.props.upperCase?(e.data?e.data:e.nullable?"":"Test").toUpperCase():e.data?e.data:e.nullable?"":"Test",key:e.id,available:t.props.items_available}))}))})}}]),a}(r.a.Component);v.defaultProps={data_id:"",x:0,y:0,width:0,height:0,available:!0,itemProps:[]};var b=a(10),f=a.n(b),g=a(12),j="http://172.24.14.103:30540/inv-backend/proxy/print/formImage/";function O(){return(O=Object(g.a)(f.a.mark((function t(e){var a,i;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(j+e);case 2:return a=t.sent,t.next=5,a.blob();case 5:return i=t.sent,console.log(i),t.abrupt("return",i);case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var y=function(t){Object(u.a)(a,t);var e=Object(h.a)(a);function a(){var t;Object(c.a)(this,a);for(var i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return(t=e.call.apply(e,[this].concat(s))).state={group_av:!0,item_av:!0},t}return Object(l.a)(a,[{key:"gen_form",value:function(t){var e=this;return t.groups.forEach((function(t){return console.log(t.upperCase)})),Object(i.jsx)("div",{id:t.name,className:"item",style:{left:t.x+"mm",top:t.y+"mm",width:t.width+"mm",height:t.height+"mm",fontSize:"."+t.fontSize.replace(".","")+"in"},children:t.groups.map((function(t){return Object(s.createElement)(v,Object(d.a)(Object(d.a)({},t),{},{key:t.id,items_available:e.state.item_av,available:e.state.group_av}))}))})}},{key:"render",value:function(){var t=this;return console.log(this.props.img),Object(i.jsxs)("div",{className:"print",style:{width:40+parseInt(this.props.data.pageWidth)+"mm",height:this.props.data.pageHeight+"mm"},children:[Object(i.jsxs)("div",{className:"printArea",style:{width:this.props.data.pageWidth+"mm",height:this.props.data.pageHeight+"mm"},children:[Object(i.jsx)("img",{src:this.props.img,alt:"\u0431\u043b\u0430\u043d\u043a",style:{width:this.props.data.pageWidth+"mm",height:this.props.data.pageHeight+"mm",top:0,left:0,position:"absolute"}}),this.gen_form(this.props.data)]}),Object(i.jsxs)("div",{className:"control-panel",children:[Object(i.jsxs)("label",{children:[Object(i.jsx)("input",{type:"checkbox",onChange:function(){return t.setState({group_av:!t.state.group_av})},defaultChecked:this.state.group_av}),"\u0413\u0440\u0443\u043f\u043f\u044b"]}),Object(i.jsxs)("label",{children:[Object(i.jsx)("input",{type:"checkbox",onChange:function(){return t.setState({item_av:!t.state.item_av})},defaultChecked:this.state.item_av}),"\u042d\u043b\u0435\u043c\u0435\u043d\u0442\u044b"]})]})]})}}]),a}(r.a.Component);function x(t){var e={};for(var a in t.attributes)isNaN(a)||(e[t.attributes[a].name]=t.attributes[a].value);return e}function k(t){var e=(new DOMParser).parseFromString(t,"text/xml").getElementsByTagName("form")[0],a={};if(void 0!==e){a=x(e);var i=[];return e.childNodes.forEach((function(t){t.attributes&&i.push(function(t){var e=x(t),a=[];return t.childNodes.forEach((function(t){t.attributes&&a.push(x(t))})),e.itemProps=a,e}(t))})),a.groups=i,a}return!1}y.defaultProps={data:[]};var _=a(8),w=function(t){Object(u.a)(a,t);var e=Object(h.a)(a);function a(){var t;Object(c.a)(this,a);for(var i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return(t=e.call.apply(e,[this].concat(s))).state={},t}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.props.onRef(this)}},{key:"componentWillUnmount",value:function(){this.props.onRef(null)}},{key:"emit_all",value:function(){for(var t in this.props.data.groups)for(var e in this.props.data.groups[t].itemProps)this.props.data.groups[t].itemProps[e].id in this.state&&(console.log(this.props.data.groups[t].itemProps[e].id),this.props.callbackFunc(this.props.data.groups[t].itemProps[e].id,this.state[this.props.data.groups[t].itemProps[e].id]))}},{key:"render",value:function(){var t=this;return Object(i.jsx)("div",{className:"data-editor",children:this.props.data.groups.map((function(e){return Object(i.jsxs)("div",{className:"group-block",children:[Object(i.jsx)("h4",{children:e.title}),e.itemProps.map((function(e){return Object(i.jsx)("input",{type:"text",id:e.id,placeholder:e.nullable?"":"Test",onChange:function(a){t.props.callbackFunc(e.id,a.target.value),t.setState(Object(_.a)({},e.id,a.target.value))}},e.id)}))]},e.id)}))})}}]),a}(r.a.Component);w.defaultProps={data:[],callbackFunc:function(t,e){return 0}};a(21);var C=function(t){Object(u.a)(a,t);var e=Object(h.a)(a);function a(t){var i;return Object(c.a)(this,a),(i=e.call(this,t)).state={data:!1,backmap:!1,img:{data:"loading.jpg",code:"NOIMG"}},i.update_value=i.update_value.bind(Object(p.a)(i)),i}return Object(l.a)(a,[{key:"gen_backmap",value:function(t){for(var e={},a=0;a<t.groups.length;a++)for(var i=0;i<t.groups[a].itemProps.length;i++)e[t.groups[a].itemProps[i].id]={group:a,item:i};return e}},{key:"update_value",value:function(t,e){this.setState((function(a){var i=a.backmap[t].group,s=a.backmap[t].item;return a.data.groups[i].itemProps[s].data=e,{data:a.data}}))}},{key:"emit_when_possible",value:function(){var t=this;this.child?this.child.emit_all():setTimeout((function(){return t.emit_when_possible()}),40)}},{key:"update_state",value:function(t){var e=this,a=k(t);this.setState({data:a,backmap:!!a&&this.gen_backmap(a)}),a&&(a.id!==this.state.img.code?function(t){return O.apply(this,arguments)}(a.id).then((function(t){e.setState({img:{data:URL.createObjectURL(t),code:a.id}}),e.child.emit_all()})):this.emit_when_possible()),console.log(a)}},{key:"render",value:function(){var t=this;return Object(i.jsxs)("div",{className:"controller",children:[this.state.data?Object(i.jsx)(y,{data:this.state.data,img:this.state.img.data}):Object(i.jsx)("div",{className:"error-msg",children:"\u041d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0439 xml"}),Object(i.jsx)("textarea",{className:"xml-input",onChange:function(e){return t.update_state(e.target.value)}}),this.state.data?Object(i.jsx)(w,{data:this.state.data,callbackFunc:this.update_value,onRef:function(e){return t.child=e}}):Object(i.jsx)("div",{className:"error-msg",children:"\u041d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0439 xml"})]})}}]),a}(r.a.Component);var P=function(){return Object(i.jsx)("div",{className:"App",children:Object(i.jsx)(C,{})})},N=function(t){t&&t instanceof Function&&a.e(3).then(a.bind(null,23)).then((function(e){var a=e.getCLS,i=e.getFID,s=e.getFCP,r=e.getLCP,n=e.getTTFB;a(t),i(t),s(t),r(t),n(t)}))};o.a.render(Object(i.jsx)(r.a.StrictMode,{children:Object(i.jsx)(P,{})}),document.getElementById("root")),N()}},[[22,1,2]]]);
//# sourceMappingURL=main.e4f2577b.chunk.js.map